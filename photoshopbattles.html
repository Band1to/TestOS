<!DOCTYPE html>
<html>
  <head>
    <title>PicturElements for PSB president 2016</title>
    <link rel="icon" href="pelement.png">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,700" rel="stylesheet" type="text/css">
    <style>
      body{
        background-color:white;
        margin:0;
        -webkit-user-select:none;
        -moz-user-select:none;
        -ie-user-select:none;
      }
      
      #gridcanvas{
        display:block;
        position:fixed;
        background-color:#ddd;
        width:60vw;
        height:33.75vw;
        left:20vw;
        top:50%;
        margin-top:-16.875vw;
      }
      
      .piece{
        display:block;
        position:fixed;
        width:15vw;
        height:8.4375vw;
        background-color:#ccc;
        background-image:url(images/psb3small.png);
        background-size:60vw 33.75vw;
        cursor:move;
      }
      
      .piece:hover{
        background-color:#aaa;
      }
      
      #desc{
        display: block;
        position: fixed;
        width: 100%;
        text-align: center;
        font-family: Roboto,Arial,sans-serif;
        margin-top: 2vw;
        font-size: 1.5vw;
      }
    </style>
    <script>
      var pressNo=-1;
      var xPos,yPos;
      var margins=[];
      var pieces=document.getElementsByClassName("piece");
      
      function init(){
        var movespaceX=window.innerWidth*0.85,movespaceY=window.innerHeight-window.innerWidth*0.084375-200;
        for (var i=0;i<pieces.length;i++){
          margins.push(Math.random()*movespaceX);
          pieces[i].style.marginLeft=""+margins[i*2]+"px";
          margins.push(100+Math.random()*movespaceY);
          pieces[i].style.marginTop=""+margins[i*2+1]+"px";
          pieces[i].style.backgroundPosition=""+(-15*(i%4))+"vw "+(-8.4375*Math.floor(i/4))+"vw";
        }
        document.getElementById("gridcanvas").width=window.innerWidth*0.6;
        document.getElementById("gridcanvas").height=window.innerWidth*0.3375;
        paint();
      }
      
      function paint(){
        var ctx=document.getElementById("gridcanvas").getContext(2d);
        for (var a=0;a<5;a++){
          ctx.beginPath();
          ctx.moveTo(0,window.innerWidth*0.3375*(a/4));
          ctx.moveTo(window.innerWidth*0.6,window.innerWidth*0.3375*(a/4));
          ctx.stroke();
          ctx.beginPath();
          ctx.moveTo(window.innerWidth*0.6*(a/4),0);
          ctx.moveTo(window.innerWidth*0.6*(a/4),window.innerHeight*0.3375);
          ctx.stroke();
        }
      } 
      
      function press(inID){
        pressNo=inID;
        xPos=event.clientX;
        yPos=event.clientY;
      }
      
      function movePieces(){
        if (pressNo>-1){
          margins[pressNo*2]+=(event.clientX-xPos);
          margins[pressNo*2+1]+=(event.clientY-yPos);
          pieces[pressNo].style.marginLeft=""+margins[pressNo*2]+"px";
          pieces[pressNo].style.marginTop=""+margins[pressNo*2+1]+"px";
          xPos=event.clientX;
          yPos=event.clientY;
          for (var a=0;a<pieces.length;a++){
            pieces[a].style.zIndex=1;
          }
          pieces[pressNo].style.zIndex=10;
        }
      }
    </script>
  </head>
  <body onload=init() onmouseup=press(-1) onmousemove=movePieces()>
    <div id="desc"><b>I thought I'd let you put my application together for yourselves.</b><br>I've done everything on this page, just so you know.</div>
    <canvas id="gridcanvas"></canvas>
    <div class="piece" onmousedown=press(0)></div>
    <div class="piece" onmousedown=press(1)></div>
    <div class="piece" onmousedown=press(2)></div>
    <div class="piece" onmousedown=press(3)></div>
    <div class="piece" onmousedown=press(4)></div>
    <div class="piece" onmousedown=press(5)></div>
    <div class="piece" onmousedown=press(6)></div>
    <div class="piece" onmousedown=press(7)></div>
    <div class="piece" onmousedown=press(8)></div>
    <div class="piece" onmousedown=press(9)></div>
    <div class="piece" onmousedown=press(10)></div>
    <div class="piece" onmousedown=press(11)></div>
    <div class="piece" onmousedown=press(12)></div>
    <div class="piece" onmousedown=press(13)></div>
    <div class="piece" onmousedown=press(14)></div>
    <div class="piece" onmousedown=press(15)></div>
  </body>
</html>
